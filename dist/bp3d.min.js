!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("bp3d",[],e):"object"==typeof exports?exports.bp3d=e():t.bp3d=e()}(this,function(){return function(t){function e(s){if(i[s])return i[s].exports;var h=i[s]={i:s,l:!1,exports:{}};return t[s].call(h.exports,h,h.exports,e),h.l=!0,h.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=0,h=1,n=2,o=3,r=4,g=5,u=0,p=1,a=2,m=[0,0,0],l={[s]:"RotationType_WHD (w,h,d)",[h]:"RotationType_HWD (h,w,d)",[n]:"RotationType_HDW (h,d,w)",[o]:"RotationType_DHW (d,h,w)",[r]:"RotationType_DWH (d,w,h)",[g]:"RotationType_WDH (w,d,h)"};class d{constructor(t,e,i,s,h){this.name="",this.width=0,this.height=0,this.depth=0,this.maxWeight=0,this.items=[],this.name=t,this.width=e,this.height=i,this.depth=s,this.maxWeight=h}getName(){return this.name}getWidth(){return this.width}getHeight(){return this.height}getDepth(){return this.depth}getMaxWeight(){return this.maxWeight}getItems(){return this.items}getVolume(){return this.getWidth()*this.getHeight()*this.getDepth()}putItem(t,e){let i=this,s=!1;t.position=e;for(let h=0;h<6;h++){t.rotationType=h;let n=t.getDimension();if(!(i.getWidth()<e[0]+n[0]||i.getHeight()<e[1]+n[1]||i.getDepth()<e[2]+n[2])){s=!0;for(let e=0;e<i.items.length;e++)if(i.items[e].intersect(t)){s=!1;break}return s&&i.items.push(t),s}}return s}}e.Bin=d;class c{constructor(t,e,i,h,n){this.name="",this.width=0,this.height=0,this.depth=0,this.weight=0,this.rotationType=s,this.position=[],this.name=t,this.width=e,this.height=i,this.depth=h,this.weight=n}getWidth(){return this.width}getHeight(){return this.height}getDepth(){return this.depth}getWeight(){return this.weight}getRotationType(){return this.rotationType}getRotationTypeString(){return l[this.getRotationType()]}getDimension(){let t;switch(this.rotationType){case s:t=[this.getWidth(),this.getHeight(),this.getDepth()];break;case h:t=[this.getHeight(),this.getWidth(),this.getDepth()];break;case n:t=[this.getHeight(),this.getDepth(),this.getWidth()];break;case o:t=[this.getDepth(),this.getHeight(),this.getWidth()];break;case r:t=[this.getDepth(),this.getWidth(),this.getHeight()];break;case g:t=[this.getWidth(),this.getDepth(),this.getHeight()]}return t}intersect(t){return b(this,t,u,p)&&b(this,t,p,a)&&b(this,t,u,a)}getVolume(){return this.getWidth()*this.getHeight()*this.getDepth()}}e.Item=c;class f{constructor(){this.bins=[],this.items=[],this.unfitItems=[]}addBin(t){this.bins.push(t)}addItem(t){this.items.push(t)}findFittedBin(t){for(let e=0;e<this.bins.length;e++){let i=this.bins[e];if(i.putItem(t,m))return 1===i.items.length&&i.items[0]===t&&(i.items=[]),i}return null}getBiggerBinThan(t){let e=t.getVolume();for(let t=0;t<this.bins;t++){let i=this.bins[t];if(i.getVolume()>e)return i}return null}unfitItem(){0!==this.items.length&&(this.unfitItems.push(this.items[0]),this.items.splice(0,1))}packToBin(t,e){let i=!1,s=null,h=[];if(!t.putItem(e[0],m)){let i=this.getBiggerBinThan(t);return i?this.packToBin(i,e):this.items}for(let e=1;e<this.items.length;e++){let n=this.items[e];t:for(let e=0;e<3;e++)for(let s=0;s<t.items.length;s++){let h,o=t.items[s];switch(e){case u:h=[o.position[0]+o.getWidth(),o.position[1],o.position[2]];break;case p:h=[o.position[0],o.position[1]+o.getHeight(),o.position[2]];break;case a:h=[o.position[0],o.position[1],o.position[2]+o.getDepth()]}if(t.putItem(n,h)){i=!0;break t}}if(!i){for(;null!==s;)if((s=this.getBiggerBinThan(t))&&(s.items.push(n),0===this.packToBin(s,s.items).length)){t=s,i=!0;break}i||h.push(n)}}return h}pack(){for(this.bins.sort((t,e)=>t.getVolume()>e.getVolume()),this.items.sort((t,e)=>t.getVolume()>e.getVolume());this.items.length>0;){let t=this.findFittedBin(this.items[0]);null!==t?this.items=this.packToBin(t,this.items):this.unfitItem()}return null}}e.Packer=f;const b=(t,e,i,s)=>{let h,n,o,r,g,u,p,a;return h=t.getDimension(),n=e.getDimension(),o=t.position[i]+h[i]/2,r=t.position[s]+h[s]/2,g=e.position[i]+n[i]/2,u=e.position[s]+n[s]/2,p=Math.max(o,g)-Math.min(o,g),a=Math.max(r,u)-Math.min(r,u),p<(h[i]+n[i])/2&&a<(h[s]+n[s])/2}}])});