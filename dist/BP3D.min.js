!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("BinPacking",[],e):"object"==typeof exports?exports.BinPacking=e():t.BinPacking=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=18)}({18:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Packer=e.Item=e.Bin=void 0;var o=n(i(4)),r=n(i(6)),s=n(i(19));e.Bin=o.default,e.Item=r.default,e.Packer=s.default},19:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=(function(t){t&&t.__esModule}(i(4)),i(6)),s=function(){function t(){n(this,t),this.bins=[],this.items=[],this.unfitItems=[]}return o(t,[{key:"addBin",value:function(t){this.bins.push(t)}},{key:"addItem",value:function(t){this.items.push(t)}},{key:"findFittedBin",value:function(t){for(var e=0;e<this.bins.length;e++){var i=this.bins[e];if(i.weighItem(t)&&i.putItem(t,r.StartPosition))return 1===i.items.length&&i.items[0]===t&&(i.items=[]),i}return null}},{key:"getBiggerBinThan",value:function(t){for(var e=t.getVolume(),i=0;i<this.bins;i++){var n=this.bins[i];if(n.getVolume()>e)return n}return null}},{key:"unfitItem",value:function(){0!==this.items.length&&(this.unfitItems.push(this.items[0]),this.items.splice(0,1))}},{key:"packToBin",value:function(t,e){var i=null,n=[];if(!(t.weighItem(e[0])&&t.putItem(e[0],r.StartPosition))){var o=this.getBiggerBinThan(t);return o?this.packToBin(o,e):this.items}for(var s=1;s<this.items.length;s++){var h=!1,u=this.items[s];if(t.weighItem(u))t:for(var a=0;a<3;a++)for(var c=0;c<t.items.length;c++){var f=void 0,g=t.items[c],p=g.getDimension();switch(a){case r.WidthAxis:f=[g.position[0]+p[0],g.position[1],g.position[2]];break;case r.HeightAxis:f=[g.position[0],g.position[1]+p[1],g.position[2]];break;case r.DepthAxis:f=[g.position[0],g.position[1],g.position[2]+p[2]]}if(t.putItem(u,f)){h=!0;break t}}if(!h){for(;null!==i;)if((i=this.getBiggerBinThan(t))&&(i.items.push(u),0===this.packToBin(i,i.items).length)){t=i,h=!0;break}h||n.push(u)}}return n}},{key:"pack",value:function(){for(this.bins.sort(function(t,e){return t.getVolume()>e.getVolume()}),this.items.sort(function(t,e){return t.getVolume()>e.getVolume()});this.items.length>0;){var t=this.findFittedBin(this.items[0]);null!==t?this.items=this.packToBin(t,this.items):this.unfitItem()}return null}}]),t}();e.default=s},4:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(5),s=function(){function t(e,i,o,s,h){n(this,t),this.name="",this.width=0,this.height=0,this.depth=0,this.maxWeight=0,this.items=[],this.name=e,this.width=(0,r.factoredInteger)(i),this.height=(0,r.factoredInteger)(o),this.depth=(0,r.factoredInteger)(s),this.maxWeight=(0,r.factoredInteger)(h)}return o(t,[{key:"getName",value:function(){return this.name}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getDepth",value:function(){return this.depth}},{key:"getMaxWeight",value:function(){return this.maxWeight}},{key:"getItems",value:function(){return this.items}},{key:"getVolume",value:function(){return this.getWidth()*this.getHeight()*this.getDepth()}},{key:"getPackedWeight",value:function(){return this.items.reduce(function(t,e){return t+e.getWeight()},0)}},{key:"weighItem",value:function(t){var e=this.getMaxWeight();return!e||t.getWeight()+this.getPackedWeight()<=e}},{key:"scoreRotation",value:function(t,e){t.rotationType=e;var i=t.getDimension();return this.getWidth()<i[0]||this.getHeight()<i[1]||this.getDepth()<i[2]?0:Math.pow(i[0]/this.getWidth(),2)+Math.pow(i[1]/this.getHeight(),2)+Math.pow(i[2]/this.getDepth(),2)}},{key:"getBestRotationOrder",value:function(t){for(var e={},i=0;i<6;i++)e[i]=this.scoreRotation(t,i);return Object.keys(e).sort(function(t,i){return e[i]-e[t]}).map(Number)}},{key:"putItem",value:function(t,e){var i=this,n=!1,o=this.getBestRotationOrder(t);t.position=e;for(var r=0;r<o.length;r++){t.rotationType=o[r];var s=t.getDimension();if(!(i.getWidth()<e[0]+s[0]||i.getHeight()<e[1]+s[1]||i.getDepth()<e[2]+s[2])){n=!0;for(var h=0;h<i.items.length;h++)if(i.items[h].intersect(t)){n=!1;break}if(n)return i.items.push(t),n}}return n}}]),t}();e.default=s},5:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.factoredInteger=function(t){return Math.round(1e5*t)}},6:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.defineProperty(e,"__esModule",{value:!0}),e.rectIntersect=e.RotationTypeStrings=e.StartPosition=e.DepthAxis=e.HeightAxis=e.WidthAxis=e.RotationType_WDH=e.RotationType_DWH=e.RotationType_DHW=e.RotationType_HDW=e.RotationType_HWD=e.RotationType_WHD=void 0;var r,s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(5),u=e.RotationType_WHD=0,a=e.RotationType_HWD=1,c=e.RotationType_HDW=2,f=e.RotationType_DHW=3,g=e.RotationType_DWH=4,p=e.RotationType_WDH=5,l=e.WidthAxis=0,d=e.HeightAxis=1,v=e.DepthAxis=2,m=(e.StartPosition=[0,0,0],e.RotationTypeStrings=(r={},o(r,u,"RotationType_WHD (w,h,d)"),o(r,a,"RotationType_HWD (h,w,d)"),o(r,c,"RotationType_HDW (h,d,w)"),o(r,f,"RotationType_DHW (d,h,w)"),o(r,g,"RotationType_DWH (d,w,h)"),o(r,p,"RotationType_WDH (w,d,h)"),r)),y=function(){function t(e,i,o,r,s){n(this,t),this.name="",this.width=0,this.height=0,this.depth=0,this.weight=0,this.rotationType=u,this.position=[],this.name=e,this.width=(0,h.factoredInteger)(i),this.height=(0,h.factoredInteger)(o),this.depth=(0,h.factoredInteger)(r),this.weight=(0,h.factoredInteger)(s)}return s(t,[{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getDepth",value:function(){return this.depth}},{key:"getWeight",value:function(){return this.weight}},{key:"getRotationType",value:function(){return this.rotationType}},{key:"getRotationTypeString",value:function(){return m[this.getRotationType()]}},{key:"getDimension",value:function(){var t=void 0;switch(this.rotationType){case u:t=[this.getWidth(),this.getHeight(),this.getDepth()];break;case a:t=[this.getHeight(),this.getWidth(),this.getDepth()];break;case c:t=[this.getHeight(),this.getDepth(),this.getWidth()];break;case f:t=[this.getDepth(),this.getHeight(),this.getWidth()];break;case g:t=[this.getDepth(),this.getWidth(),this.getHeight()];break;case p:t=[this.getWidth(),this.getDepth(),this.getHeight()]}return t}},{key:"intersect",value:function(t){return k(this,t,l,d)&&k(this,t,d,v)&&k(this,t,l,v)}},{key:"getVolume",value:function(){return this.getWidth()*this.getHeight()*this.getDepth()}}]),t}();e.default=y;var k=e.rectIntersect=function(t,e,i,n){var o=void 0,r=void 0,s=void 0,h=void 0,u=void 0,a=void 0,c=void 0,f=void 0;return o=t.getDimension(),r=e.getDimension(),s=t.position[i]+o[i]/2,h=t.position[n]+o[n]/2,u=e.position[i]+r[i]/2,a=e.position[n]+r[n]/2,c=Math.max(s,u)-Math.min(s,u),f=Math.max(h,a)-Math.min(h,a),c<(o[i]+r[i])/2&&f<(o[n]+r[n])/2}}})});