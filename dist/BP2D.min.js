!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("BinPacking",[],e):"object"==typeof exports?exports.BinPacking=e():t.BinPacking=e()}(this,function(){return function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t,e,r){"use strict";class i{constructor(t,e){this.score_1=i.MAX_INT,this.score_2=i.MAX_INT,void 0!==t&&(this.score_1=t),void 0!==e&&(this.score_2=e)}valueOf(){return this.score_1+this.score_2}assign(t){this.score_1=t.score_1,this.score_2=t.score_2}isBlank(){return this.score_1===i.MAX_INT}decreaseBy(t){this.score_1+=t,this.score_2+=t}}e.a=i,i.MAX_INT=Number.MAX_SAFE_INTEGER},function(t,e,r){"use strict";var i=r(0);class n{findPositionForNewNode(t,e){let r=new i.a,n=t.width,s=t.height;return e.forEach(e=>{this.tryPlaceRectIn(e,t,n,s,r),this.tryPlaceRectIn(e,t,s,n,r)}),r}tryPlaceRectIn(t,e,r,i,n){if(t.width>=r&&t.height>=i){let s=this.calculateScore(t,r,i);s<n&&(e.x=t.x,e.y=t.y,e.width=r,e.height=i,e.packed=!0,n.assign(s))}}calculateScore(t,e,r){throw"NotImplementedError"}}e.a=n},function(t,e,r){"use strict";var i=r(1),n=r(0);class s extends i.a{calculateScore(t,e,r){let i=[Math.abs(t.width-e),Math.abs(t.height-r)].sort((t,e)=>t-e);return new n.a(i[0],i[1])}}e.a=s},function(t,e,r){"use strict";class i{constructor(t,e){this.width=null,this.height=null,this.x=0,this.y=0,this.packed=!1,this.width=t,this.height=e}rotate(){let{width:t,height:e}=this;this.width=e,this.height=t}get label(){return`${this.width}x${this.height} at [${this.x},${this.y}]`}get area(){return this.width*this.height}}e.a=i},,,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(7),n=r(3),s=r(8),o=r(13);r.d(e,"Bin",function(){return i.a}),r.d(e,"Box",function(){return n.a}),r.d(e,"Packer",function(){return s.a}),r.d(e,"heuristics",function(){return o})},function(t,e,r){"use strict";var i=r(2),n=r(3),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};class o{constructor(t,e,r){this.width=null,this.height=null,this.boxes=[],this.heuristic=null,this.freeRectangles=[],this.width=t,this.height=e,this.freeRectangles=[new h(t,e)],this.heuristic=r||new i.a}get area(){return this.width*this.height}get efficiency(){let t=0;return this.boxes.forEach(e=>{t+=e.area}),100*t/this.area}get label(){return`${this.width}x${this.height} ${this.efficiency}%`}insert(t){if(t.packed)return!1;if(this.heuristic.findPositionForNewNode(t,this.freeRectangles),!t.packed)return!1;let e=this.freeRectangles.length,r=0;for(;r<e;)this.splitFreeNode(this.freeRectangles[r],t)?(this.freeRectangles.splice(r,1),e--):r++;return this.pruneFreeList(),this.boxes.push(t),!0}scoreFor(t){let e=new n.a(t.width,t.height);return this.heuristic.findPositionForNewNode(e,this.freeRectangles)}isLargerThan(t){return this.width>=t.width&&this.height>=t.height||this.height>=t.width&&this.width>=t.height}splitFreeNode(t,e){return!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y)&&(this.trySplitFreeNodeVertically(t,e),this.trySplitFreeNodeHorizontally(t,e),!0)}trySplitFreeNodeVertically(t,e){e.x<t.x+t.width&&e.x+e.width>t.x&&(this.tryLeaveFreeSpaceAtTop(t,e),this.tryLeaveFreeSpaceAtBottom(t,e))}tryLeaveFreeSpaceAtTop(t,e){if(e.y>t.y&&e.y<t.y+t.height){let r=s({},t);r.height=e.y-r.y,this.freeRectangles.push(r)}}tryLeaveFreeSpaceAtBottom(t,e){if(e.y+e.height<t.y+t.height){let r=s({},t);r.y=e.y+e.height,r.height=t.y+t.height-(e.y+e.height),this.freeRectangles.push(r)}}trySplitFreeNodeHorizontally(t,e){e.y<t.y+t.height&&e.y+e.height>t.y&&(this.tryLeaveFreeSpaceOnLeft(t,e),this.tryLeaveFreeSpaceOnRight(t,e))}tryLeaveFreeSpaceOnLeft(t,e){if(e.x>t.x&&e.x<t.x+t.width){let r=s({},t);r.width=e.x-r.y,this.freeRectangles.push(r)}}tryLeaveFreeSpaceOnRight(t,e){if(e.x+e.width<t.x+t.width){let r=s({},t);r.x=e.x+e.width,r.width=t.x+t.width-(e.x+e.width),this.freeRectangles.push(r)}}pruneFreeList(){let t=0;for(;t<this.freeRectangles.length;){let e=t+1;if(e===this.freeRectangles.length)break;for(;e<this.freeRectangles.length;){if(this.isContainedIn(this.freeRectangles[t],this.freeRectangles[e])){this.freeRectangles.splice(t,1),t--;break}this.isContainedIn(this.freeRectangles[e],this.freeRectangles[t])?this.freeRectangles.splice(e,1):e++,t++}}}isContainedIn(t,e){return t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height}}e.a=o;class h{constructor(t,e){this.x=0,this.y=0,this.width=null,this.height=null,this.width=t,this.height=e}}},function(t,e,r){"use strict";var i=r(0),n=r(9);class s{constructor(t){this.bins=[],this.unpackedBoxes=[],this.bins=t}pack(t,e={}){let r,s=[];if(0===(t=t.filter(t=>!t.packed)).length)return s;let o=e.limit||i.a.MAX_INT,h=new n.a(this.bins,t);for(;(r=h.bestFit())&&(r.bin.insert(r.box),h.removeBox(r.box),h.recalculateBin(r.bin),s.push(r.box),!(s.length>=o)););return s}}e.a=s},function(t,e,r){"use strict";var i=r(10);class n{constructor(t,e){this.entries=[],t.forEach(t=>{this.addBinEntries(t,e)})}debug(){r(11),console.table(this.entries.map(t=>({bin:t.bin.label,box:t.box.label,score:t.score})))}addBinEntries(t,e){e.forEach(e=>{let r=new i.a(t,e);r.calculate(),this.entries.push(r)})}any(){return this.boxes.some(t=>t)}largestNotFitingBox(){this.entries.filter(t=>t.fit).map(t=>t.box);return this.entries.forEach(t=>{this.fittingBoxes.contains(t.box)&&(this.unfit=t)}),!!null.box&&null}bestFit(){let t=null;for(let e=0;e<this.entries.length;e++){let r=this.entries[e];r.fit()&&((null===t||r.score<t.score)&&(t=r))}return t}removeBox(t){this.entries=this.entries.filter(e=>e.box!==t)}addBin(t){this.addBinEntries(t,this.currentBoxes())}recalculateBin(t){this.entries.filter(e=>e.bin===t).forEach(t=>t.calculate())}currentBoxes(){return[...new Set(this.entries.map(t=>t.box))]}}e.a=n},function(t,e,r){"use strict";class i{constructor(t,e){this.bin=null,this.box=null,this.score=null,this.bin=t,this.box=e}calculate(){return this.score=this.bin.scoreFor(this.box),this.score}fit(){return!this.score.isBlank()}}e.a=i},function(t,e,r){!function(){"use strict";!function(){function t(t,e){return Array.isArray(e)&&e.every(t)}function e(t){var e=new u;return t.forEach(function(t){"string"==typeof t||"number"==typeof t?e.cell("item",t):Object.keys(t).forEach(function(r){e.cell(r,t[r])}),e.newRow()}),e.toString()}function i(t,e){var r=new u;e.forEach(function(e){e.forEach(function(e,i){r.cell(t[i],e)}),r.newRow()});var i=r.toString();console.log(i)}function n(t,r){var i=e(r),n=i.indexOf("\n");if(n>0){t.length>n&&(n=t.length),console.log(t);var s,o="";for(s=0;s<n;s+=1)o+="-";console.log(o)}console.log(i)}function s(t){return Object.keys(t).map(function(e){return{key:e,value:t[e]}})}function o(t){return e(s(t))}if("undefined"==typeof console)throw new Error("Weird, console object is undefined");if("function"!=typeof console.table){var h=function(t,e){return typeof e===t}.bind(null,"string"),c=t.bind(null,h),a=t.bind(null,Array.isArray),u=r(12);console.table=function(){var t=Array.prototype.slice.call(arguments);return 2===t.length&&"string"==typeof t[0]&&Array.isArray(t[1])?n(t[0],t[1]):2===t.length&&c(t[0])&&a(t[1])?i(t[0],t[1]):void t.forEach(function(t){if("string"==typeof t)return console.log(t);Array.isArray(t)?console.log(e(t)):"object"==typeof t&&console.log(o(t))})}}}()}()},function(t,e){function r(){this.rows=[],this.row={__printers:{}}}function i(t){return void 0===t?"":""+t}function n(t){return t.replace(/\u001b\[\d+m/g,"").length}function s(t){return function(e,r){var s=i(e),o=n(s);return(r>o?Array(r-o+1).join(t):"")+s}}function o(t){return function(e,r){var s=i(e),o=n(s);return s+(r>o?Array(r-o+1).join(t):"")}}function h(t,e){for(var r in t)"__printers"!=r&&e(r,t[r])}function c(t,e){return t===e?0:void 0===t?1:void 0===e?-1:null===t?1:null===e?-1:t>e?1:t<e?-1:c(String(t),String(e))}t.exports=r,r.prototype.newRow=function(){return this.rows.push(this.row),this.row={__printers:{}},this},r.prototype.cell=function(t,e,r){return this.row[t]=e,this.row.__printers[t]=r||i,this},r.prototype.separator="  ",r.string=i,r.leftPadder=s;var a=r.padLeft=s(" ");r.rightPadder=o;var u=o(" ");r.number=function(t){return function(e,r){if(null==e)return"";if("number"!=typeof e)throw new Error(e+" is not a number");var i=null==t?e+"":e.toFixed(t);return a(i,r)}},r.prototype.columns=function(){for(var t={},e=0;e<2;e++)this.rows.forEach(function(e){var r=0;h(e,function(e){r=Math.max(r,t[e]||0),t[e]=r,r++})});return Object.keys(t).sort(function(e,r){return t[e]-t[r]})},r.prototype.print=function(){var t=this.columns(),e=this.separator,r={},i="";return this.rows.forEach(function(t){h(t,function(e,i){var s=t.__printers[e].call(t,i);r[e]=Math.max(n(s),r[e]||0)})}),this.rows.forEach(function(n){var s="";t.forEach(function(t){var i=r[t],o=n.hasOwnProperty(t)?""+n.__printers[t].call(n,n[t],i):"";s+=u(o,i)+e}),s=s.slice(0,-e.length),i+=s+"\n"}),i},r.prototype.toString=function(){var t=this.columns(),e=new r;return e.separator=this.separator,t.forEach(function(t){e.cell(t,t)}),e.newRow(),e.pushDelimeter(t),e.rows=e.rows.concat(this.rows),this.totals&&this.rows.length&&(e.pushDelimeter(t),this.forEachTotal(e.cell.bind(e)),e.newRow()),e.print()},r.prototype.pushDelimeter=function(t){return(t=t||this.columns()).forEach(function(t){this.cell(t,void 0,s("-"))},this),this.newRow()},r.prototype.forEachTotal=function(t){for(var e in this.totals){var r=this.totals[e],i=r.init,n=this.rows.length;this.rows.forEach(function(t,s){i=r.reduce.call(t,i,t[e],s,n)}),t(e,i,r.printer)}},r.prototype.printTransposed=function(t){t=t||{};var e=new r;return e.separator=t.separator||this.separator,this.columns().forEach(function(r){e.cell(0,r,t.namePrinter),this.rows.forEach(function(t,i){e.cell(i+1,t[r],t.__printers[r])}),e.newRow()},this),e.print()},r.prototype.sort=function(t){if("function"==typeof t)return this.rows.sort(t),this;var e=(Array.isArray(t)?t:this.columns()).map(function(t){var e="asc",r=/(.*)\|\s*(asc|des)\s*$/.exec(t);return r&&(t=r[1],e=r[2]),function(r,i){return"asc"==e?c(r[t],i[t]):c(i[t],r[t])}});return this.sort(function(t,r){for(var i=0;i<e.length;i++){var n=e[i](t,r);if(0!=n)return n}return 0})},r.prototype.total=function(t,e){return e=e||{},this.totals=this.totals||{},this.totals[t]={reduce:e.reduce||r.aggr.sum,printer:e.printer||a,init:null==e.init?0:e.init},this},(r.aggr={}).printer=function(t,e){return e=e||i,function(r,i){return a(t+e(r),i)}},r.aggr.sum=function(t,e){return t+e},r.aggr.avg=function(t,e,r,i){return t+=e,r+1==i?t/i:t},r.print=function(t,e,i){var n=e||{};e="function"==typeof e?e:function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var i=n[r]||{};e(i.name||r,t[r],i.printer)}};var s=new r,o=s.cell.bind(s);return Array.isArray(t)?(i=i||function(t){return t.toString()},t.forEach(function(t){e(t,o),s.newRow()})):(i=i||function(t){return t.printTransposed({separator:" : "})},e(t,o),s.newRow()),i(s)},r.log=function(t,e,i){console.log(r.print(t,e,i))},r.prototype.log=function(){console.log(this.toString())}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(14);r.d(e,"BestAreaFit",function(){return i.a});var n=r(15);r.d(e,"BestLongSideFit",function(){return n.a});var s=r(2);r.d(e,"BestShort",function(){return s.a});var o=r(16);r.d(e,"BottomLeft",function(){return o.a})},function(t,e,r){"use strict";var i=r(1),n=r(0);class s extends i.a{calculateScore(t,e,r){let i=t.width*t.height-e*r,s=Math.abs(t.width-e),o=Math.abs(t.height-r),h=Math.min(s,o);return new n.a(i,h)}}e.a=s},function(t,e,r){"use strict";var i=r(1),n=r(0);class s extends i.a{calculateScore(t,e,r){let i=[Math.abs(t.width-e),Math.abs(t.height-r)].sort((t,e)=>t-e).reverse();return new n.a(i[0],i[1])}}e.a=s},function(t,e,r){"use strict";var i=r(1),n=r(0);class s extends i.a{calculateScore(t,e,r){let i=t.y+r;return new n.a(i,t.x)}}e.a=s}])});