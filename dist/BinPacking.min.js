!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("BinPacking",[],e):"object"==typeof exports?exports.BinPacking=e():t.BinPacking=e()}(this,function(){return function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=19)}([function(t,e,i){"use strict";class r{constructor(t,e){this.score_1=r.MAX_INT,this.score_2=r.MAX_INT,void 0!==t&&(this.score_1=t),void 0!==e&&(this.score_2=e)}valueOf(){return this.score_1+this.score_2}assign(t){this.score_1=t.score_1,this.score_2=t.score_2}isBlank(){return this.score_1===r.MAX_INT}decreaseBy(t){this.score_1+=t,this.score_2+=t}}e.a=r,r.MAX_INT=Number.MAX_SAFE_INTEGER},function(t,e,i){"use strict";var r=i(0);class n{findPositionForNewNode(t,e){let i=new r.a,n=t.width,s=t.height;return e.forEach(e=>{this.tryPlaceRectIn(e,t,n,s,i),this.tryPlaceRectIn(e,t,s,n,i)}),i}tryPlaceRectIn(t,e,i,r,n){if(t.width>=i&&t.height>=r){let s=this.calculateScore(t,i,r);s<n&&(e.x=t.x,e.y=t.y,e.width=i,e.height=r,e.packed=!0,n.assign(s))}}calculateScore(t,e,i){throw"NotImplementedError"}}e.a=n},function(t,e,i){"use strict";var r=i(1),n=i(0);class s extends r.a{calculateScore(t,e,i){let r=[Math.abs(t.width-e),Math.abs(t.height-i)].sort((t,e)=>t-e);return new n.a(r[0],r[1])}}e.a=s},function(t,e,i){"use strict";class r{constructor(t,e){this.width=null,this.height=null,this.x=0,this.y=0,this.packed=!1,this.width=t,this.height=e}rotate(){let{width:t,height:e}=this;this.width=e,this.height=t}get label(){return`${this.width}x${this.height} at [${this.x},${this.y}]`}get area(){return this.width*this.height}}e.a=r},function(t,e,i){"use strict";class r{constructor(t,e,i,r,n){this.name="",this.width=0,this.height=0,this.depth=0,this.maxWeight=0,this.items=[],this.name=t,this.width=e,this.height=i,this.depth=r,this.maxWeight=n}getName(){return this.name}getWidth(){return this.width}getHeight(){return this.height}getDepth(){return this.depth}getMaxWeight(){return this.maxWeight}getItems(){return this.items}getVolume(){return this.getWidth()*this.getHeight()*this.getDepth()}putItem(t,e){let i=this,r=!1;t.position=e;for(let n=0;n<6;n++){t.rotationType=n;let s=t.getDimension();if(!(i.getWidth()<e[0]+s[0]||i.getHeight()<e[1]+s[1]||i.getDepth()<e[2]+s[2])){r=!0;for(let e=0;e<i.items.length;e++)if(i.items[e].intersect(t)){r=!1;break}return r&&i.items.push(t),r}}return r}}e.a=r},function(t,e,i){"use strict";const r=0,n=1,s=2,o=3,h=4,a=5,c=0;e.d=c;const u=1;e.b=u;const l=2;e.a=l;const f=[0,0,0];e.c=f;const g={[r]:"RotationType_WHD (w,h,d)",[n]:"RotationType_HWD (h,w,d)",[s]:"RotationType_HDW (h,d,w)",[o]:"RotationType_DHW (d,h,w)",[h]:"RotationType_DWH (d,w,h)",[a]:"RotationType_WDH (w,d,h)"};class p{constructor(t,e,i,n,s){this.name="",this.width=0,this.height=0,this.depth=0,this.weight=0,this.rotationType=r,this.position=[],this.name=t,this.width=e,this.height=i,this.depth=n,this.weight=s}getWidth(){return this.width}getHeight(){return this.height}getDepth(){return this.depth}getWeight(){return this.weight}getRotationType(){return this.rotationType}getRotationTypeString(){return g[this.getRotationType()]}getDimension(){let t;switch(this.rotationType){case r:t=[this.getWidth(),this.getHeight(),this.getDepth()];break;case n:t=[this.getHeight(),this.getWidth(),this.getDepth()];break;case s:t=[this.getHeight(),this.getDepth(),this.getWidth()];break;case o:t=[this.getDepth(),this.getHeight(),this.getWidth()];break;case h:t=[this.getDepth(),this.getWidth(),this.getHeight()];break;case a:t=[this.getWidth(),this.getDepth(),this.getHeight()]}return t}intersect(t){return d(this,t,c,u)&&d(this,t,u,l)&&d(this,t,c,l)}getVolume(){return this.getWidth()*this.getHeight()*this.getDepth()}}e.e=p;const d=(t,e,i,r)=>{let n,s,o,h,a,c,u,l;return n=t.getDimension(),s=e.getDimension(),o=t.position[i]+n[i]/2,h=t.position[r]+n[r]/2,a=e.position[i]+s[i]/2,c=e.position[r]+s[r]/2,u=Math.max(o,a)-Math.min(o,a),l=Math.max(h,c)-Math.min(h,c),u<(n[i]+s[i])/2&&l<(n[r]+s[r])/2}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),n=i(3),s=i(8),o=i(13);i.d(e,"Bin",function(){return r.a}),i.d(e,"Box",function(){return n.a}),i.d(e,"Packer",function(){return s.a}),i.d(e,"heuristics",function(){return o})},function(t,e,i){"use strict";var r=i(2),n=i(3),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};class o{constructor(t,e,i){this.width=null,this.height=null,this.boxes=[],this.heuristic=null,this.freeRectangles=[],this.width=t,this.height=e,this.freeRectangles=[new h(t,e)],this.heuristic=i||new r.a}get area(){return this.width*this.height}get efficiency(){let t=0;return this.boxes.forEach(e=>{t+=e.area}),100*t/this.area}get label(){return`${this.width}x${this.height} ${this.efficiency}%`}insert(t){if(t.packed)return!1;if(this.heuristic.findPositionForNewNode(t,this.freeRectangles),!t.packed)return!1;let e=this.freeRectangles.length,i=0;for(;i<e;)this.splitFreeNode(this.freeRectangles[i],t)?(this.freeRectangles.splice(i,1),e--):i++;return this.pruneFreeList(),this.boxes.push(t),!0}scoreFor(t){let e=new n.a(t.width,t.height);return this.heuristic.findPositionForNewNode(e,this.freeRectangles)}isLargerThan(t){return this.width>=t.width&&this.height>=t.height||this.height>=t.width&&this.width>=t.height}splitFreeNode(t,e){return!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y)&&(this.trySplitFreeNodeVertically(t,e),this.trySplitFreeNodeHorizontally(t,e),!0)}trySplitFreeNodeVertically(t,e){e.x<t.x+t.width&&e.x+e.width>t.x&&(this.tryLeaveFreeSpaceAtTop(t,e),this.tryLeaveFreeSpaceAtBottom(t,e))}tryLeaveFreeSpaceAtTop(t,e){if(e.y>t.y&&e.y<t.y+t.height){let i=s({},t);i.height=e.y-i.y,this.freeRectangles.push(i)}}tryLeaveFreeSpaceAtBottom(t,e){if(e.y+e.height<t.y+t.height){let i=s({},t);i.y=e.y+e.height,i.height=t.y+t.height-(e.y+e.height),this.freeRectangles.push(i)}}trySplitFreeNodeHorizontally(t,e){e.y<t.y+t.height&&e.y+e.height>t.y&&(this.tryLeaveFreeSpaceOnLeft(t,e),this.tryLeaveFreeSpaceOnRight(t,e))}tryLeaveFreeSpaceOnLeft(t,e){if(e.x>t.x&&e.x<t.x+t.width){let i=s({},t);i.width=e.x-i.y,this.freeRectangles.push(i)}}tryLeaveFreeSpaceOnRight(t,e){if(e.x+e.width<t.x+t.width){let i=s({},t);i.x=e.x+e.width,i.width=t.x+t.width-(e.x+e.width),this.freeRectangles.push(i)}}pruneFreeList(){let t=0;for(;t<this.freeRectangles.length;){let e=t+1;if(e===this.freeRectangles.length)break;for(;e<this.freeRectangles.length;){if(this.isContainedIn(this.freeRectangles[t],this.freeRectangles[e])){this.freeRectangles.splice(t,1),t--;break}this.isContainedIn(this.freeRectangles[e],this.freeRectangles[t])?this.freeRectangles.splice(e,1):e++,t++}}}isContainedIn(t,e){return t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height}}e.a=o;class h{constructor(t,e){this.x=0,this.y=0,this.width=null,this.height=null,this.width=t,this.height=e}}},function(t,e,i){"use strict";var r=i(0),n=i(9);class s{constructor(t){this.bins=[],this.unpackedBoxes=[],this.bins=t}pack(t,e={}){let i,s=[];if(0===(t=t.filter(t=>!t.packed)).length)return s;let o=e.limit||r.a.MAX_INT,h=new n.a(this.bins,t);for(;(i=h.bestFit())&&(i.bin.insert(i.box),h.removeBox(i.box),h.recalculateBin(i.bin),s.push(i.box),!(s.length>=o)););return s}}e.a=s},function(t,e,i){"use strict";var r=i(10);class n{constructor(t,e){this.entries=[],t.forEach(t=>{this.addBinEntries(t,e)})}debug(){i(11),console.table(this.entries.map(t=>({bin:t.bin.label,box:t.box.label,score:t.score})))}addBinEntries(t,e){e.forEach(e=>{let i=new r.a(t,e);i.calculate(),this.entries.push(i)})}any(){return this.boxes.some(t=>t)}largestNotFitingBox(){this.entries.filter(t=>t.fit).map(t=>t.box);return this.entries.forEach(t=>{this.fittingBoxes.contains(t.box)&&(this.unfit=t)}),!!null.box&&null}bestFit(){let t=null;for(let e=0;e<this.entries.length;e++){let i=this.entries[e];i.fit()&&((null===t||i.score<t.score)&&(t=i))}return t}removeBox(t){this.entries=this.entries.filter(e=>e.box!==t)}addBin(t){this.addBinEntries(t,this.currentBoxes())}recalculateBin(t){this.entries.filter(e=>e.bin===t).forEach(t=>t.calculate())}currentBoxes(){return[...new Set(this.entries.map(t=>t.box))]}}e.a=n},function(t,e,i){"use strict";class r{constructor(t,e){this.bin=null,this.box=null,this.score=null,this.bin=t,this.box=e}calculate(){return this.score=this.bin.scoreFor(this.box),this.score}fit(){return!this.score.isBlank()}}e.a=r},function(t,e,i){!function(){"use strict";!function(){function t(t,e){return Array.isArray(e)&&e.every(t)}function e(t){var e=new u;return t.forEach(function(t){"string"==typeof t||"number"==typeof t?e.cell("item",t):Object.keys(t).forEach(function(i){e.cell(i,t[i])}),e.newRow()}),e.toString()}function r(t,e){var i=new u;e.forEach(function(e){e.forEach(function(e,r){i.cell(t[r],e)}),i.newRow()});var r=i.toString();console.log(r)}function n(t,i){var r=e(i),n=r.indexOf("\n");if(n>0){t.length>n&&(n=t.length),console.log(t);var s,o="";for(s=0;s<n;s+=1)o+="-";console.log(o)}console.log(r)}function s(t){return Object.keys(t).map(function(e){return{key:e,value:t[e]}})}function o(t){return e(s(t))}if("undefined"==typeof console)throw new Error("Weird, console object is undefined");if("function"!=typeof console.table){var h=function(t,e){return typeof e===t}.bind(null,"string"),a=t.bind(null,h),c=t.bind(null,Array.isArray),u=i(12);console.table=function(){var t=Array.prototype.slice.call(arguments);return 2===t.length&&"string"==typeof t[0]&&Array.isArray(t[1])?n(t[0],t[1]):2===t.length&&a(t[0])&&c(t[1])?r(t[0],t[1]):void t.forEach(function(t){if("string"==typeof t)return console.log(t);Array.isArray(t)?console.log(e(t)):"object"==typeof t&&console.log(o(t))})}}}()}()},function(t,e){function i(){this.rows=[],this.row={__printers:{}}}function r(t){return void 0===t?"":""+t}function n(t){return t.replace(/\u001b\[\d+m/g,"").length}function s(t){return function(e,i){var s=r(e),o=n(s);return(i>o?Array(i-o+1).join(t):"")+s}}function o(t){return function(e,i){var s=r(e),o=n(s);return s+(i>o?Array(i-o+1).join(t):"")}}function h(t,e){for(var i in t)"__printers"!=i&&e(i,t[i])}function a(t,e){return t===e?0:void 0===t?1:void 0===e?-1:null===t?1:null===e?-1:t>e?1:t<e?-1:a(String(t),String(e))}t.exports=i,i.prototype.newRow=function(){return this.rows.push(this.row),this.row={__printers:{}},this},i.prototype.cell=function(t,e,i){return this.row[t]=e,this.row.__printers[t]=i||r,this},i.prototype.separator="  ",i.string=r,i.leftPadder=s;var c=i.padLeft=s(" ");i.rightPadder=o;var u=o(" ");i.number=function(t){return function(e,i){if(null==e)return"";if("number"!=typeof e)throw new Error(e+" is not a number");var r=null==t?e+"":e.toFixed(t);return c(r,i)}},i.prototype.columns=function(){for(var t={},e=0;e<2;e++)this.rows.forEach(function(e){var i=0;h(e,function(e){i=Math.max(i,t[e]||0),t[e]=i,i++})});return Object.keys(t).sort(function(e,i){return t[e]-t[i]})},i.prototype.print=function(){var t=this.columns(),e=this.separator,i={},r="";return this.rows.forEach(function(t){h(t,function(e,r){var s=t.__printers[e].call(t,r);i[e]=Math.max(n(s),i[e]||0)})}),this.rows.forEach(function(n){var s="";t.forEach(function(t){var r=i[t],o=n.hasOwnProperty(t)?""+n.__printers[t].call(n,n[t],r):"";s+=u(o,r)+e}),s=s.slice(0,-e.length),r+=s+"\n"}),r},i.prototype.toString=function(){var t=this.columns(),e=new i;return e.separator=this.separator,t.forEach(function(t){e.cell(t,t)}),e.newRow(),e.pushDelimeter(t),e.rows=e.rows.concat(this.rows),this.totals&&this.rows.length&&(e.pushDelimeter(t),this.forEachTotal(e.cell.bind(e)),e.newRow()),e.print()},i.prototype.pushDelimeter=function(t){return(t=t||this.columns()).forEach(function(t){this.cell(t,void 0,s("-"))},this),this.newRow()},i.prototype.forEachTotal=function(t){for(var e in this.totals){var i=this.totals[e],r=i.init,n=this.rows.length;this.rows.forEach(function(t,s){r=i.reduce.call(t,r,t[e],s,n)}),t(e,r,i.printer)}},i.prototype.printTransposed=function(t){t=t||{};var e=new i;return e.separator=t.separator||this.separator,this.columns().forEach(function(i){e.cell(0,i,t.namePrinter),this.rows.forEach(function(t,r){e.cell(r+1,t[i],t.__printers[i])}),e.newRow()},this),e.print()},i.prototype.sort=function(t){if("function"==typeof t)return this.rows.sort(t),this;var e=(Array.isArray(t)?t:this.columns()).map(function(t){var e="asc",i=/(.*)\|\s*(asc|des)\s*$/.exec(t);return i&&(t=i[1],e=i[2]),function(i,r){return"asc"==e?a(i[t],r[t]):a(r[t],i[t])}});return this.sort(function(t,i){for(var r=0;r<e.length;r++){var n=e[r](t,i);if(0!=n)return n}return 0})},i.prototype.total=function(t,e){return e=e||{},this.totals=this.totals||{},this.totals[t]={reduce:e.reduce||i.aggr.sum,printer:e.printer||c,init:null==e.init?0:e.init},this},(i.aggr={}).printer=function(t,e){return e=e||r,function(i,r){return c(t+e(i),r)}},i.aggr.sum=function(t,e){return t+e},i.aggr.avg=function(t,e,i,r){return t+=e,i+1==r?t/r:t},i.print=function(t,e,r){var n=e||{};e="function"==typeof e?e:function(t,e){for(var i in t)if(t.hasOwnProperty(i)){var r=n[i]||{};e(r.name||i,t[i],r.printer)}};var s=new i,o=s.cell.bind(s);return Array.isArray(t)?(r=r||function(t){return t.toString()},t.forEach(function(t){e(t,o),s.newRow()})):(r=r||function(t){return t.printTransposed({separator:" : "})},e(t,o),s.newRow()),r(s)},i.log=function(t,e,r){console.log(i.print(t,e,r))},i.prototype.log=function(){console.log(this.toString())}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(14);i.d(e,"BestAreaFit",function(){return r.a});var n=i(15);i.d(e,"BestLongSideFit",function(){return n.a});var s=i(2);i.d(e,"BestShort",function(){return s.a});var o=i(16);i.d(e,"BottomLeft",function(){return o.a})},function(t,e,i){"use strict";var r=i(1),n=i(0);class s extends r.a{calculateScore(t,e,i){let r=t.width*t.height-e*i,s=Math.abs(t.width-e),o=Math.abs(t.height-i),h=Math.min(s,o);return new n.a(r,h)}}e.a=s},function(t,e,i){"use strict";var r=i(1),n=i(0);class s extends r.a{calculateScore(t,e,i){let r=[Math.abs(t.width-e),Math.abs(t.height-i)].sort((t,e)=>t-e).reverse();return new n.a(r[0],r[1])}}e.a=s},function(t,e,i){"use strict";var r=i(1),n=i(0);class s extends r.a{calculateScore(t,e,i){let r=t.y+i;return new n.a(r,t.x)}}e.a=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),n=i(5),s=i(18);i.d(e,"Bin",function(){return r.a}),i.d(e,"Item",function(){return n.e}),i.d(e,"Packer",function(){return s.a})},function(t,e,i){"use strict";i(4);var r=i(5);class n{constructor(){this.bins=[],this.items=[],this.unfitItems=[]}addBin(t){this.bins.push(t)}addItem(t){this.items.push(t)}findFittedBin(t){for(let e=0;e<this.bins.length;e++){let i=this.bins[e];if(i.putItem(t,r.c))return 1===i.items.length&&i.items[0]===t&&(i.items=[]),i}return null}getBiggerBinThan(t){let e=t.getVolume();for(let t=0;t<this.bins;t++){let i=this.bins[t];if(i.getVolume()>e)return i}return null}unfitItem(){0!==this.items.length&&(this.unfitItems.push(this.items[0]),this.items.splice(0,1))}packToBin(t,e){let i=!1,n=null,s=[];if(!t.putItem(e[0],r.c)){let i=this.getBiggerBinThan(t);return i?this.packToBin(i,e):this.items}for(let e=1;e<this.items.length;e++){let o=this.items[e];t:for(let e=0;e<3;e++)for(let n=0;n<t.items.length;n++){let s,h=t.items[n];switch(e){case r.d:s=[h.position[0]+h.getWidth(),h.position[1],h.position[2]];break;case r.b:s=[h.position[0],h.position[1]+h.getHeight(),h.position[2]];break;case r.a:s=[h.position[0],h.position[1],h.position[2]+h.getDepth()]}if(t.putItem(o,s)){i=!0;break t}}if(!i){for(;null!==n;)if((n=this.getBiggerBinThan(t))&&(n.items.push(o),0===this.packToBin(n,n.items).length)){t=n,i=!0;break}i||s.push(o)}}return s}pack(){for(this.bins.sort((t,e)=>t.getVolume()>e.getVolume()),this.items.sort((t,e)=>t.getVolume()>e.getVolume());this.items.length>0;){let t=this.findFittedBin(this.items[0]);null!==t?this.items=this.packToBin(t,this.items):this.unfitItem()}return null}}e.a=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(6),n=i(17);i.d(e,"BP2D",function(){return r.default}),i.d(e,"BP3D",function(){return n.default})}])});