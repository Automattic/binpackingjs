!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("BinPacking",[],e):"object"==typeof exports?exports.BinPacking=e():t.BinPacking=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=20)}([function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e,n){i(this,t),this.score_1=t.MAX_INT,this.score_2=t.MAX_INT,void 0!==e&&(this.score_1=e),void 0!==n&&(this.score_2=n)}return r(t,[{key:"valueOf",value:function(){return this.score_1+this.score_2}},{key:"assign",value:function(t){this.score_1=t.score_1,this.score_2=t.score_2}},{key:"isBlank",value:function(){return this.score_1===t.MAX_INT}},{key:"decreaseBy",value:function(t){this.score_1+=t,this.score_2+=t}}]),t}();o.MAX_INT=Number.MAX_SAFE_INTEGER,e.default=o},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),u=function(){function t(){i(this,t)}return r(t,[{key:"findPositionForNewNode",value:function(t,e){var n=this,i=new o.default,r=t.width,u=t.height;return e.forEach(function(e){n.tryPlaceRectIn(e,t,r,u,i),n.tryPlaceRectIn(e,t,u,r,i)}),i}},{key:"tryPlaceRectIn",value:function(t,e,n,i,r){if(t.width>=n&&t.height>=i){var o=this.calculateScore(t,n,i);o<r&&(e.x=t.x,e.y=t.y,e.width=n,e.height=i,e.packed=!0,r.assign(o))}}},{key:"calculateScore",value:function(t,e,n){throw"NotImplementedError"}}]),t}();e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=i(n(1)),c=i(n(0)),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,s.default),a(e,[{key:"calculateScore",value:function(t,e,n){var i=[Math.abs(t.width-e),Math.abs(t.height-n)].sort(function(t,e){return t-e});return new c.default(i[0],i[1])}}]),e}();e.default=f},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e,n){i(this,t),this.width=null,this.height=null,this.x=0,this.y=0,this.packed=!1,this.width=e,this.height=n}return r(t,[{key:"rotate",value:function(){var t=this.width,e=this.height;this.width=e,this.height=t}},{key:"label",get:function(){return this.width+"x"+this.height+" at ["+this.x+","+this.y+"]"}},{key:"area",get:function(){return this.width*this.height}}]),t}();e.default=o},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(5),u=function(){function t(e,n,r,u,a){i(this,t),this.name="",this.width=0,this.height=0,this.depth=0,this.maxWeight=0,this.items=[],this.name=e,this.width=(0,o.factoredInteger)(n),this.height=(0,o.factoredInteger)(r),this.depth=(0,o.factoredInteger)(u),this.maxWeight=(0,o.factoredInteger)(a)}return r(t,[{key:"getName",value:function(){return this.name}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getDepth",value:function(){return this.depth}},{key:"getMaxWeight",value:function(){return this.maxWeight}},{key:"getItems",value:function(){return this.items}},{key:"getVolume",value:function(){return this.getWidth()*this.getHeight()*this.getDepth()}},{key:"getPackedWeight",value:function(){return this.items.reduce(function(t,e){return t+e.getWeight()},0)}},{key:"weighItem",value:function(t){var e=this.getMaxWeight();return!e||t.getWeight()+this.getPackedWeight()<=e}},{key:"scoreRotation",value:function(t,e){t.rotationType=e;var n=t.getDimension();return this.getWidth()<n[0]||this.getHeight()<n[1]||this.getDepth()<n[2]?0:Math.pow(n[0]/this.getWidth(),2)+Math.pow(n[1]/this.getHeight(),2)+Math.pow(n[2]/this.getDepth(),2)}},{key:"getBestRotationOrder",value:function(t){for(var e={},n=0;n<6;n++)e[n]=this.scoreRotation(t,n);return Object.keys(e).sort(function(t,n){return e[n]-e[t]}).map(Number)}},{key:"putItem",value:function(t,e){var n=this,i=!1,r=this.getBestRotationOrder(t);t.position=e;for(var o=0;o<r.length;o++){t.rotationType=r[o];var u=t.getDimension();if(!(n.getWidth()<e[0]+u[0]||n.getHeight()<e[1]+u[1]||n.getDepth()<e[2]+u[2])){i=!0;for(var a=0;a<n.items.length;a++)if(n.items[a].intersect(t)){i=!1;break}if(i)return n.items.push(t),i}}return i}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.factoredInteger=function(t){return Math.round(1e5*t)}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.rectIntersect=e.RotationTypeStrings=e.StartPosition=e.DepthAxis=e.HeightAxis=e.WidthAxis=e.RotationType_WDH=e.RotationType_DWH=e.RotationType_DHW=e.RotationType_HDW=e.RotationType_HWD=e.RotationType_WHD=void 0;var o,u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(5),s=e.RotationType_WHD=0,c=e.RotationType_HWD=1,f=e.RotationType_HDW=2,h=e.RotationType_DHW=3,l=e.RotationType_DWH=4,p=e.RotationType_WDH=5,y=e.WidthAxis=0,d=e.HeightAxis=1,g=e.DepthAxis=2,v=(e.StartPosition=[0,0,0],e.RotationTypeStrings=(o={},r(o,s,"RotationType_WHD (w,h,d)"),r(o,c,"RotationType_HWD (h,w,d)"),r(o,f,"RotationType_HDW (h,d,w)"),r(o,h,"RotationType_DHW (d,h,w)"),r(o,l,"RotationType_DWH (d,w,h)"),r(o,p,"RotationType_WDH (w,d,h)"),o)),b=function(){function t(e,n,r,o,u){i(this,t),this.name="",this.width=0,this.height=0,this.depth=0,this.weight=0,this.rotationType=s,this.position=[],this.name=e,this.width=(0,a.factoredInteger)(n),this.height=(0,a.factoredInteger)(r),this.depth=(0,a.factoredInteger)(o),this.weight=(0,a.factoredInteger)(u)}return u(t,[{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getDepth",value:function(){return this.depth}},{key:"getWeight",value:function(){return this.weight}},{key:"getRotationType",value:function(){return this.rotationType}},{key:"getRotationTypeString",value:function(){return v[this.getRotationType()]}},{key:"getDimension",value:function(){var t=void 0;switch(this.rotationType){case s:t=[this.getWidth(),this.getHeight(),this.getDepth()];break;case c:t=[this.getHeight(),this.getWidth(),this.getDepth()];break;case f:t=[this.getHeight(),this.getDepth(),this.getWidth()];break;case h:t=[this.getDepth(),this.getHeight(),this.getWidth()];break;case l:t=[this.getDepth(),this.getWidth(),this.getHeight()];break;case p:t=[this.getWidth(),this.getDepth(),this.getHeight()]}return t}},{key:"intersect",value:function(t){return w(this,t,y,d)&&w(this,t,d,g)&&w(this,t,y,g)}},{key:"getVolume",value:function(){return this.getWidth()*this.getHeight()*this.getDepth()}}]),t}();e.default=b;var w=e.rectIntersect=function(t,e,n,i){var r=void 0,o=void 0,u=void 0,a=void 0,s=void 0,c=void 0,f=void 0,h=void 0;return r=t.getDimension(),o=e.getDimension(),u=t.position[n]+r[n]/2,a=t.position[i]+r[i]/2,s=e.position[n]+o[n]/2,c=e.position[i]+o[i]/2,f=Math.max(u,s)-Math.min(u,s),h=Math.max(a,c)-Math.min(a,c),f<(r[n]+o[n])/2&&h<(r[i]+o[i])/2}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.heuristics=e.Packer=e.Box=e.Bin=void 0;var r=i(n(8)),o=i(n(3)),u=i(n(9)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(14));e.Bin=r.default,e.Box=o.default,e.Packer=u.default,e.heuristics=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.FreeSpaceBox=void 0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=i(n(2)),s=i(n(3)),c=function(){function t(e,n,i){r(this,t),this.width=null,this.height=null,this.boxes=[],this.heuristic=null,this.freeRectangles=[],this.width=e,this.height=n,this.freeRectangles=[new f(e,n)],this.heuristic=i||new a.default}return u(t,[{key:"insert",value:function(t){if(t.packed)return!1;if(this.heuristic.findPositionForNewNode(t,this.freeRectangles),!t.packed)return!1;for(var e=this.freeRectangles.length,n=0;n<e;)this.splitFreeNode(this.freeRectangles[n],t)?(this.freeRectangles.splice(n,1),e--):n++;return this.pruneFreeList(),this.boxes.push(t),!0}},{key:"scoreFor",value:function(t){var e=new s.default(t.width,t.height);return this.heuristic.findPositionForNewNode(e,this.freeRectangles)}},{key:"isLargerThan",value:function(t){return this.width>=t.width&&this.height>=t.height||this.height>=t.width&&this.width>=t.height}},{key:"splitFreeNode",value:function(t,e){return!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y)&&(this.trySplitFreeNodeVertically(t,e),this.trySplitFreeNodeHorizontally(t,e),!0)}},{key:"trySplitFreeNodeVertically",value:function(t,e){e.x<t.x+t.width&&e.x+e.width>t.x&&(this.tryLeaveFreeSpaceAtTop(t,e),this.tryLeaveFreeSpaceAtBottom(t,e))}},{key:"tryLeaveFreeSpaceAtTop",value:function(t,e){if(e.y>t.y&&e.y<t.y+t.height){var n=o({},t);n.height=e.y-n.y,this.freeRectangles.push(n)}}},{key:"tryLeaveFreeSpaceAtBottom",value:function(t,e){if(e.y+e.height<t.y+t.height){var n=o({},t);n.y=e.y+e.height,n.height=t.y+t.height-(e.y+e.height),this.freeRectangles.push(n)}}},{key:"trySplitFreeNodeHorizontally",value:function(t,e){e.y<t.y+t.height&&e.y+e.height>t.y&&(this.tryLeaveFreeSpaceOnLeft(t,e),this.tryLeaveFreeSpaceOnRight(t,e))}},{key:"tryLeaveFreeSpaceOnLeft",value:function(t,e){if(e.x>t.x&&e.x<t.x+t.width){var n=o({},t);n.width=e.x-n.x,this.freeRectangles.push(n)}}},{key:"tryLeaveFreeSpaceOnRight",value:function(t,e){if(e.x+e.width<t.x+t.width){var n=o({},t);n.x=e.x+e.width,n.width=t.x+t.width-(e.x+e.width),this.freeRectangles.push(n)}}},{key:"pruneFreeList",value:function(){for(var t=0;t<this.freeRectangles.length;){var e=t+1;if(e===this.freeRectangles.length)break;for(;e<this.freeRectangles.length;){if(this.isContainedIn(this.freeRectangles[t],this.freeRectangles[e])){this.freeRectangles.splice(t,1),t--;break}this.isContainedIn(this.freeRectangles[e],this.freeRectangles[t])?this.freeRectangles.splice(e,1):e++,t++}}}},{key:"isContainedIn",value:function(t,e){return t&&e&&t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height}},{key:"area",get:function(){return this.width*this.height}},{key:"efficiency",get:function(){var t=0;return this.boxes.forEach(function(e){t+=e.area}),100*t/this.area}},{key:"label",get:function(){return this.width+"x"+this.height+" "+this.efficiency+"%"}}]),t}();e.default=c;var f=e.FreeSpaceBox=function t(e,n){r(this,t),this.x=0,this.y=0,this.width=null,this.height=null,this.width=e,this.height=n}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=i(n(0)),a=i(n(10)),s=function(){function t(e){r(this,t),this.bins=[],this.unpackedBoxes=[],this.bins=e}return o(t,[{key:"pack",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],i=void 0;if(0===(t=t.filter(function(t){return!t.packed})).length)return n;for(var r=e.limit||u.default.MAX_INT,o=new a.default(this.bins,t);(i=o.bestFit())&&(i.bin.insert(i.box),o.removeBox(i.box),o.recalculateBin(i.bin),n.push(i.box),!(n.length>=r)););return this.unpackedBoxes=t.filter(function(t){return!t.packed}),n}}]),t}();e.default=s},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function(t){return t&&t.__esModule?t:{default:t}}(n(11)),a=function(){function t(e,n){var i=this;r(this,t),this.entries=[],e.forEach(function(t){i.addBinEntries(t,n)})}return o(t,[{key:"debug",value:function(){n(12),console.table(this.entries.map(function(t){return{bin:t.bin.label,box:t.box.label,score:t.score}}))}},{key:"addBinEntries",value:function(t,e){var n=this;e.forEach(function(e){var i=new u.default(t,e);i.calculate(),n.entries.push(i)})}},{key:"any",value:function(){return this.boxes.some(function(t){return t})}},{key:"largestNotFitingBox",value:function(){var t=this;this.entries.filter(function(t){return t.fit}).map(function(t){return t.box});return this.entries.forEach(function(e){t.fittingBoxes.contains(e.box)&&(t.unfit=e)}),!!null.box&&null}},{key:"bestFit",value:function(){for(var t=null,e=0;e<this.entries.length;e++){var n=this.entries[e];n.fit()&&((null===t||n.score<t.score)&&(t=n))}return t}},{key:"removeBox",value:function(t){this.entries=this.entries.filter(function(e){return e.box!==t})}},{key:"addBin",value:function(t){this.addBinEntries(t,this.currentBoxes())}},{key:"recalculateBin",value:function(t){this.entries.filter(function(e){return e.bin===t}).forEach(function(t){return t.calculate()})}},{key:"currentBoxes",value:function(){return[].concat(i(new Set(this.entries.map(function(t){return t.box}))))}}]),t}();e.default=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e,n){i(this,t),this.bin=null,this.box=null,this.score=null,this.bin=e,this.box=n}return r(t,[{key:"calculate",value:function(){return this.score=this.bin.scoreFor(this.box),this.score}},{key:"fit",value:function(){return!this.score.isBlank()}}]),t}();e.default=o},function(t,e,n){!function(){"use strict";!function(){function t(t,e){return Array.isArray(e)&&e.every(t)}function e(t){var e=new f;return t.forEach(function(t){"string"==typeof t||"number"==typeof t?e.cell("item",t):Object.keys(t).forEach(function(n){e.cell(n,t[n])}),e.newRow()}),e.toString()}function i(t,e){var n=new f;e.forEach(function(e){e.forEach(function(e,i){n.cell(t[i],e)}),n.newRow()});var i=n.toString();console.log(i)}function r(t,n){var i=e(n),r=i.indexOf("\n");if(r>0){t.length>r&&(r=t.length),console.log(t);var o,u="";for(o=0;o<r;o+=1)u+="-";console.log(u)}console.log(i)}function o(t){return Object.keys(t).map(function(e){return{key:e,value:t[e]}})}function u(t){return e(o(t))}if("undefined"==typeof console)throw new Error("Weird, console object is undefined");if("function"!=typeof console.table){var a=function(t,e){return typeof e===t}.bind(null,"string"),s=t.bind(null,a),c=t.bind(null,Array.isArray),f=n(13);console.table=function(){var t=Array.prototype.slice.call(arguments);return 2===t.length&&"string"==typeof t[0]&&Array.isArray(t[1])?r(t[0],t[1]):2===t.length&&s(t[0])&&c(t[1])?i(t[0],t[1]):void t.forEach(function(t){if("string"==typeof t)return console.log(t);Array.isArray(t)?console.log(e(t)):"object"==typeof t&&console.log(u(t))})}}}()}()},function(t,e){function n(){this.rows=[],this.row={__printers:{}}}function i(t){return void 0===t?"":""+t}function r(t){return t.replace(/\u001b\[\d+m/g,"").length}function o(t){return function(e,n){var o=i(e),u=r(o);return(n>u?Array(n-u+1).join(t):"")+o}}function u(t){return function(e,n){var o=i(e),u=r(o);return o+(n>u?Array(n-u+1).join(t):"")}}function a(t,e){for(var n in t)"__printers"!=n&&e(n,t[n])}function s(t,e){return t===e?0:void 0===t?1:void 0===e?-1:null===t?1:null===e?-1:t>e?1:t<e?-1:s(String(t),String(e))}t.exports=n,n.prototype.newRow=function(){return this.rows.push(this.row),this.row={__printers:{}},this},n.prototype.cell=function(t,e,n){return this.row[t]=e,this.row.__printers[t]=n||i,this},n.prototype.separator="  ",n.string=i,n.leftPadder=o;var c=n.padLeft=o(" ");n.rightPadder=u;var f=u(" ");n.number=function(t){return function(e,n){if(null==e)return"";if("number"!=typeof e)throw new Error(e+" is not a number");var i=null==t?e+"":e.toFixed(t);return c(i,n)}},n.prototype.columns=function(){for(var t={},e=0;e<2;e++)this.rows.forEach(function(e){var n=0;a(e,function(e){n=Math.max(n,t[e]||0),t[e]=n,n++})});return Object.keys(t).sort(function(e,n){return t[e]-t[n]})},n.prototype.print=function(){var t=this.columns(),e=this.separator,n={},i="";return this.rows.forEach(function(t){a(t,function(e,i){var o=t.__printers[e].call(t,i);n[e]=Math.max(r(o),n[e]||0)})}),this.rows.forEach(function(r){var o="";t.forEach(function(t){var i=n[t],u=r.hasOwnProperty(t)?""+r.__printers[t].call(r,r[t],i):"";o+=f(u,i)+e}),o=o.slice(0,-e.length),i+=o+"\n"}),i},n.prototype.toString=function(){var t=this.columns(),e=new n;return e.separator=this.separator,t.forEach(function(t){e.cell(t,t)}),e.newRow(),e.pushDelimeter(t),e.rows=e.rows.concat(this.rows),this.totals&&this.rows.length&&(e.pushDelimeter(t),this.forEachTotal(e.cell.bind(e)),e.newRow()),e.print()},n.prototype.pushDelimeter=function(t){return(t=t||this.columns()).forEach(function(t){this.cell(t,void 0,o("-"))},this),this.newRow()},n.prototype.forEachTotal=function(t){for(var e in this.totals){var n=this.totals[e],i=n.init,r=this.rows.length;this.rows.forEach(function(t,o){i=n.reduce.call(t,i,t[e],o,r)}),t(e,i,n.printer)}},n.prototype.printTransposed=function(t){t=t||{};var e=new n;return e.separator=t.separator||this.separator,this.columns().forEach(function(n){e.cell(0,n,t.namePrinter),this.rows.forEach(function(t,i){e.cell(i+1,t[n],t.__printers[n])}),e.newRow()},this),e.print()},n.prototype.sort=function(t){if("function"==typeof t)return this.rows.sort(t),this;var e=(Array.isArray(t)?t:this.columns()).map(function(t){var e="asc",n=/(.*)\|\s*(asc|des)\s*$/.exec(t);return n&&(t=n[1],e=n[2]),function(n,i){return"asc"==e?s(n[t],i[t]):s(i[t],n[t])}});return this.sort(function(t,n){for(var i=0;i<e.length;i++){var r=e[i](t,n);if(0!=r)return r}return 0})},n.prototype.total=function(t,e){return e=e||{},this.totals=this.totals||{},this.totals[t]={reduce:e.reduce||n.aggr.sum,printer:e.printer||c,init:null==e.init?0:e.init},this},(n.aggr={}).printer=function(t,e){return e=e||i,function(n,i){return c(t+e(n),i)}},n.aggr.sum=function(t,e){return t+e},n.aggr.avg=function(t,e,n,i){return t+=e,n+1==i?t/i:t},n.print=function(t,e,i){var r=e||{};e="function"==typeof e?e:function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var i=r[n]||{};e(i.name||n,t[n],i.printer)}};var o=new n,u=o.cell.bind(o);return Array.isArray(t)?(i=i||function(t){return t.toString()},t.forEach(function(t){e(t,u),o.newRow()})):(i=i||function(t){return t.printTransposed({separator:" : "})},e(t,u),o.newRow()),i(o)},n.log=function(t,e,i){console.log(n.print(t,e,i))},n.prototype.log=function(){console.log(this.toString())}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15);Object.defineProperty(e,"BestAreaFit",{enumerable:!0,get:function(){return i(r).default}});var o=n(16);Object.defineProperty(e,"BestLongSideFit",{enumerable:!0,get:function(){return i(o).default}});var u=n(2);Object.defineProperty(e,"BestShortSideFit",{enumerable:!0,get:function(){return i(u).default}});var a=n(17);Object.defineProperty(e,"BottomLeft",{enumerable:!0,get:function(){return i(a).default}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=i(n(1)),c=i(n(0)),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,s.default),a(e,[{key:"calculateScore",value:function(t,e,n){var i=t.width*t.height-e*n,r=Math.abs(t.width-e),o=Math.abs(t.height-n),u=Math.min(r,o);return new c.default(i,u)}}]),e}();e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=i(n(1)),c=i(n(0)),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,s.default),a(e,[{key:"calculateScore",value:function(t,e,n){var i=[Math.abs(t.width-e),Math.abs(t.height-n)].sort(function(t,e){return t-e}).reverse();return new c.default(i[0],i[1])}}]),e}();e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=i(n(1)),c=i(n(0)),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,s.default),a(e,[{key:"calculateScore",value:function(t,e,n){var i=t.y+n;return new c.default(i,t.x)}}]),e}();e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Packer=e.Item=e.Bin=void 0;var r=i(n(4)),o=i(n(6)),u=i(n(19));e.Bin=r.default,e.Item=o.default,e.Packer=u.default},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=(function(t){t&&t.__esModule}(n(4)),n(6)),u=function(){function t(){i(this,t),this.bins=[],this.items=[],this.unfitItems=[]}return r(t,[{key:"addBin",value:function(t){this.bins.push(t)}},{key:"addItem",value:function(t){this.items.push(t)}},{key:"findFittedBin",value:function(t){for(var e=0;e<this.bins.length;e++){var n=this.bins[e];if(n.weighItem(t)&&n.putItem(t,o.StartPosition))return 1===n.items.length&&n.items[0]===t&&(n.items=[]),n}return null}},{key:"getBiggerBinThan",value:function(t){for(var e=t.getVolume(),n=0;n<this.bins;n++){var i=this.bins[n];if(i.getVolume()>e)return i}return null}},{key:"unfitItem",value:function(){0!==this.items.length&&(this.unfitItems.push(this.items[0]),this.items.splice(0,1))}},{key:"packToBin",value:function(t,e){var n=null,i=[];if(!(t.weighItem(e[0])&&t.putItem(e[0],o.StartPosition))){var r=this.getBiggerBinThan(t);return r?this.packToBin(r,e):this.items}for(var u=1;u<this.items.length;u++){var a=!1,s=this.items[u];if(t.weighItem(s))t:for(var c=0;c<3;c++)for(var f=0;f<t.items.length;f++){var h=void 0,l=t.items[f],p=l.getDimension();switch(c){case o.WidthAxis:h=[l.position[0]+p[0],l.position[1],l.position[2]];break;case o.HeightAxis:h=[l.position[0],l.position[1]+p[1],l.position[2]];break;case o.DepthAxis:h=[l.position[0],l.position[1],l.position[2]+p[2]]}if(t.putItem(s,h)){a=!0;break t}}if(!a){for(;null!==n;)if((n=this.getBiggerBinThan(t))&&(n.items.push(s),0===this.packToBin(n,n.items).length)){t=n,a=!0;break}a||i.push(s)}}return i}},{key:"pack",value:function(){for(this.bins.sort(function(t,e){return t.getVolume()>e.getVolume()}),this.items.sort(function(t,e){return t.getVolume()>e.getVolume()});this.items.length>0;){var t=this.findFittedBin(this.items[0]);null!==t?this.items=this.packToBin(t,this.items):this.unfitItem()}return null}}]),t}();e.default=u},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.BP3D=e.BP2D=void 0;var r=i(n(7)),o=i(n(18));e.BP2D=r,e.BP3D=o}])});